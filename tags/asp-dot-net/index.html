

<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>asp.net - Tom Philip - Full Stack, Rails, .NET, Android and Boxee Developer</title>
  <meta name="author" content="Tom Philip">

  
  <meta name="description" content="Category: asp.net">
  


  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/favicon-152.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/favicon-144.png">
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/favicon-120.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/favicon-114.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/favicon-72.png">
  <link rel="apple-touch-icon-precomposed" href="/images/favicon-57.png">
  <link rel="icon" href="/images/favicon-152.png" >
  <meta name="msapplication-TileColor" content="#222">
  <meta name="msapplication-TileImage" content="/images/favicon-144.png">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tommysqueak.github.iotags/asp-dot-net">
  
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Tom Philip - Full Stack, Rails, .NET, Android and Boxee Developer" type="application/atom+xml">
  <script src="/javascripts/vendor/modernizr-2.0.js"></script>
</head>

<body class="page-post">

  <header class="site-header" role="banner"><div class="site-header__back" data-200-start="opacity[quadratic]:0.5" data-400-start="opacity[quadratic]:1"></div>
<div class="site-header__footer" data-400-start="left[cubic]:100%" data-500-start="left[cubic]:0%"></div>

<nav class="navbar navbar-fixed-top navbar-inverse" role="navigation" data-500-start="border-bottom-width[quadratic]:0px;" data-540-start="border-bottom-width[quadratic]:4px;">

  <div class="navbar-header">
    
    <button id="navToggler" type="button" aria-label="Toggle navigation" class="lines-button x2 navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="lines"></span>
    </button>

    <div class="site-header__identity navbar-brand">
      <a href="/"><img class="avatar site-header__avatar" src="/images/tomphilip_thumbnail.jpg" alt="Tom Philip" data-start="height[quadratic]:100px" data-480-start="height[quadratic]:44px"></a>
      <h1 class="site-header__title"><a href="/">Tom Philip</a></h1>
    </div>
  </div>

  <div class="collapse navbar-collapse">
<ul class="site-navigation site-navigation--header nav navbar-nav navbar-right">
  <li class="site-navigation__link"><a href="/about" title="About Tom Philip">About</a></li>
  <li class="site-navigation__link"><a href="/interests" title="Things that interest Tom Philip">Interest</a></li>
  <li class="site-navigation__link"><a href="/contact" title="Contact Tom Philip">Contact</a></li>
  <li class="site-navigation__link"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><span class="icon-rss"></span></a></li>
</ul></div>
  
</nav>


</header>

  <div class="site-container">
     <div class="container">
  
  <div class="post post--page">
  
    <header class="post__header">
      <h1 class="post__title">asp.net</h1>
    </header>      
    
    <section class="boxed">
        <ul class="tag-list">
          <li class="tag-list__tag"><a href="/archive">all <span class="badge">&nbsp;</span></a></li>
          <li class='tag-list__tag'><a href='/tags/android/'>android <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/app/'>app <span class='badge'>2</span></a></li><li class='tag-list__tag'><a href='/tags/asp-dot-net/'>asp.net <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/backbone/'>backbone <span class='badge'>2</span></a></li><li class='tag-list__tag'><a href='/tags/bdd/'>bdd <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/bdd/'>bdd <span class='badge'>2</span></a></li><li class='tag-list__tag'><a href='/tags/business-model-generation/'>business model generation <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/ci/'>ci <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/couchdb/'>couchdb <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/gtd/'>gtd <span class='badge'>11</span></a></li><li class='tag-list__tag'><a href='/tags/gtd-app-review/'>gtd app review <span class='badge'>11</span></a></li><li class='tag-list__tag'><a href='/tags/kanban/'>kanban <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/laters/'>laters <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/lean-startup/'>lean startup <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/lean-startup/'>lean startup <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/nosql/'>nosql <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/software-design/'>software design <span class='badge'>2</span></a></li><li class='tag-list__tag'><a href='/tags/talk/'>talk <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/usability/'>usability <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/ux/'>ux <span class='badge'>1</span></a></li><li class='tag-list__tag'><a href='/tags/wordpress/'>wordpress <span class='badge'>1</span></a></li>    
        </ul>
    </section>
  
    <div class="post-list post-list--compact">
      
       

         
         

         <div class="post-list__container col-xs-12 col-md-6">
             <article class="post post--item post--compact">
               <div class="post__media-object col-xs-12 col-sm-5 col-lg-4">
  

  
    <p class="post-metadata">
      











<time class="post__published" datetime="2012-02-02T00:00:00+01:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2012</time>
      
  

<span class="post-metadata__author"><span>Tom Philip</span></span>

      
    </p>
  

</div>

<div class="post__media-body col-xs-12 col-sm-7 col-lg-8">

  <header class="post__header">

    <h1 class="post__title"><a href="/cassette-the-javascript-css-minifying-combining-compressing-tool-for-asp-net/">Cassette. The Javascript CSS Minifying Combining Compressing Tool for ASP.NET</a></h1>

  </header>

  <div class="post__content"><img class="alignnone size-full wp-image-761" title="cassette" src="http://tomphilip.me/wp-content/uploads/2012/02/cassette.jpg" alt="Cassette Tape" width="640" height="504" />

<strong>In a nutshell, <a href="http://getcassette.net/">Cassette</a> will minify, combine, compress and cache your css and javascript files, reducing your page load times.</strong> It does a <a title="more benefits of Cassette" href="http://getcassette.net/benefits">heap more</a> too like <a href="http://lesscss.org/">LESS</a>, <a href="http://coffeescript.org/">Coffeescript</a>, file ordering, debug vs release files, html templates, CDN assets and more.

It's easy to <a title="getting started with Cassette" href="http://getcassette.net/documentation/getting-started">get started</a> with too. No more complicated than referencing your css and javascript files directly.
<h2>No Excuses</h2>
I hadn't implemented any minifying, combining, etc for my app <a title="Create, Discover and Share Packing Lists" href="http://pikpak.me">Pik Pak</a>. As I saw it (with my lean goggles on), it worked fine, it was good enough. I could benefit from it but really was the effort worth it. I'd bookmarked Cassette ages ago when it was Knapsack and made it a someday-maybe task. As I was giving Pik Pak a facelift, removing a garish design and replacing with the wonderful <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>, it was time to bring it in.

My opinion has changed, it is worth it. It takes so little effort. I know in my next asp.net project it will go in at the beginning, it's so easy to use there's no excuse not too (Except perhaps 1, if you're not using .NET 4.0). In dev I get the scripts unaltered, just like I'd inserted them manually and in prod they get minified, compressed and combined.
<h2>How it Works (Briefly)</h2>
I want to share with you a little bit about how it works, as it wasn't clear to me at first. I originally mistook the <a href="http://getcassette.net/documentation/getting-started">Bundle.Reference() calls</a> to be informing Cassette about the asset and saying it's required on this page. There's actually 3 parts to Cassette, in it's simplest form (there's tons more to it):

There are 3 parts to getting your scripts/css combined, minified etc
<h3>1. Tell Cassette about your css/js files</h3>
Cassette doesn't automatically discover your files (assets), you need to tell it where they are and how they should be combined (bundles). A <a href="http://getcassette.net/documentation/getting-started/assets-and-bundles">bundle</a> is a number of files that will be combined into one minified/compressed file (in production) that is referenced by one script/stylesheet tag, thus causing a single download. The default CasseteConfiguration.css that get's dropped in by nuget creates a bundle for every css or javascript file. Which is better than nothing. You're getting minification, compression, caching, versioning but it's still a download per file, there's no combining. So you want to define bundles to minimise the number of downloads the browser has to make.

As well as defining what goes into a bundle you can also define the order within bundle and dependencies between bundles or files. Eg your script might depend on a framework like jQuery or Backbone.

There's a number of ways to define what goes into a bundle.
<ul>
	<li>A bundle per file (default config). <code>bundles.AddPerIndividualFile&lt;StylesheetBundle&gt;("Content/Stylesheets");</code></li>
	<li><a href="http://getcassette.net/documentation/configuration/add-directory">A folder as a bundle</a>. <code>bundles.Add&lt;StylesheetBundle&gt;("Content/Stylesheets");</code></li>
	<li> A <a href="http://getcassette.net/documentation/configuration/add-per-sub-directory">folder as a bundle and each direct subfolder as a bundle</a> to. <code>bundles.AddPerSubDirectory&lt;<code>ScriptBundle</code>&gt;("Scripts");</code></li>
</ul>
All of these kind be fine tuned to.

Defining the order they get rendered and dependencies (If your script depends on jquery and you reference your file or bundle in a page, jquery will automatically be pulled in) can be:
<ul>
	<li><a href="http://getcassette.net/documentation/AssetReferences">Embedded in the file itself</a>. <code>// @reference ~/lib/backbone.js</code> <strong>or</strong> <code>/// &lt;reference path="~/lib/backbone.js" /&gt;</code></li>
	<li>or in <a href="http://getcassette.net/documentation/configuration/bundle-descriptor-file">bundle.txt files</a> in the folders that are being bundled.</li>
</ul>
If you're still with me! Defining the bundles is the most difficult part but once you're done the next 2 are straight forward.
<h3>2. Request scripts to be added to the page</h3>
This is were <a href="http://getcassette.net/documentation/getting-started/assets-and-bundles">inform Casssette, that you need xyx file on this page</a>. This can be in your master page/Razor layout, page or partial view. You can either
<ul>
	<li>reference the file itself (and the containing bundle will be inserted) <code>@Bundles.Reference("lib/backbone/backbone.marionette.js");</code></li>
	<li>or you can reference the bundle <code>@Bundles.Reference("lib/backbone")</code></li>
</ul>
You can also optionally specify where the script should be rendered. <code>@Bundles.Reference("lib/modernizr.js", "header")</code>
<h3>3. Render the scripts</h3>
Call into Cassette to render the script/css tags at that point. Normally this will be one or 2 lines in your layout/masterpage file.

[codesyntax lang="asp"]
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Web App&lt;/title&gt;
    @Bundles.RenderStylesheets()
&lt;/head&gt;
&lt;body&gt;
    ...
    @Bundles.RenderScripts()
&lt;/body&gt;
&lt;/html&gt;</pre>
[/codesyntax]

There's so much more, all in the <a href="http://getcassette.net/documentation/">documentation</a>.
<h2>Tips</h2>
So far, these are my thoughts on how to get the best out of Cassette with least effort.
<h3>Render scripts before closing body tags</h3>
Everyone knows you should render your scripts before the closing body tags, to prevent the page load being blocked. Have your main <code>@Bundles.RenderScripts();</code> before the closing body tags and have a specific one <code>@Bundles.RenderScripts("header")</code> in the header for those scripts that need it (<a href="http://www.modernizr.com/">Modernizr</a>).
<h3>jQuery CDN</h3>
If your using jquery, you should create a bundle just for itself. Create a folder (probably called jquery), add the jquery file and a bundle.txt file containing the following:

[codesyntax lang="ini"]
<pre>[external]
url = //ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
fallbackCondition = !window.jQuery

[assets]
jquery.js</pre>
[/codesyntax]

Then reference the bundle as normal <code>@Bundles.Reference("scripts/jquery");</code> In dev you get your full jquery js file and in prod you get googles cdn jquery file (most likely already cached in the broswer) with a fallback to your minified/compressed one.
<h3>Convention</h3>
Use <code>bundles.AddPerSubDirectory&lt;ScriptBundle&gt;("Scripts");</code> and arrange your scripts/css into folders for each bundle you want. That way you don't have to go back and touch the CasetteConfiguration. You can leave it upto convention and fine tune with a bundle.txt file in the folders/bundles where needed.

It'd be great to hear how your using Cassette, in the comments and any tips that have helped.
</div>
  
  

</div>




             </article>
         </div>

       

    </div>
  </div>
  
</div>

  </div>

  <footer role="contentinfo" class="site-footer">

<div class="container">

  <p class="footnote footnote--credit">
    Designed &amp; made by Tom Philip, powered by <a href="http://octopress.org">octopress</a>
  </p>

  <p class="footnote footnote--copyright">
    Copyright &copy; 2013 Tom Philip
  </p>

  <div class="row">
    <div class="col-md-4">

      <section class="list list--icons">
        <h1 class="list__title">Social</h1>
        <ul class="list__list">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><span class="icon-rss"></span></a></li>
          <li><a href="http://twitter.com/tommysqueak" rel="nofollow" title="Twitter"><span class="icon-twitter-3"></span></a></li>
          <li><a href="http://www.facebook.com/tommysqueak" rel="nofollow" title="Facebook"><span class="icon-facebook"></span></a></li>
          <li><a href="https://plus.google.com/114913251697222576781?rel=author" rel="publisher" title="Google+"><span class="icon-google__x2B_"></span></a></li>
          <li><a href="http://www.linkedin.com/in/tomphilip" rel="nofollow" title="LinkedIn"><span class="icon-linkedin"></span></a></li>
          <li><a href="http://www.flickr.com/photos/tommysqueak/" rel="nofollow" title="Flickr"><span class="icon-flickr"></span></a></li>
          <li><a href="http://pinterest.com/tommysqueak/" rel="nofollow" title="PInterest"><span class="icon-pinterest"></span></a></li>
          <li><a href="http://www.youtube.com/user/MrTommysqueak" rel="nofollow" title="YouTube"><span class="icon-youtube"></span></a></li>
          <li><a href="http://realworldusability.tumblr.com/" rel="nofollow" title="Tumblr"><span class="icon-tumblr"></span></a></li>
          <li><a href="http://vimeo.com/greatboxee" rel="nofollow" class="icon-vimeo" title="Vimeo"></a></li>
          <li><a href="http://foursquare.com/tommysqueak" rel="nofollow" title="FourSquare"><span class="icon-foursquare_1"></span></a></li>
          <li><a href="https://github.com/tommysqueak" rel="nofollow" title="GitHub"><span class="icon-github-01"></span></a></li>
          <li><a href="http://open.spotify.com/user/tommysqueak" rel="nofollow" title="Spotify"><span class="icon-spotify"></span></a></li>
          <li><a href="http://instagram.com/tommysqueak" rel="nofollow" title="Instagram"><span class="icon-instagram"></span></a></li>
          <li><a href="http://about.me/tomphilip" rel="nofollow" title="about.me">me</a></li>
        </ul>
      </section>

    </div>
    
    <div class="col-md-4">
      

      
    </div>
    <div class="col-md-4">
      <section class="list recent-posts">
  <h1 class="list__title">Recent Posts</h1>
  <ul class="list__list">
    
      <li>
        <a href="/dependency-inversion-principle/">Dependency Inversion Principle</a>
      </li>
    
      <li>
        <a href="/great-software-design-slides/">Great Software Design Slides</a>
      </li>
    
      <li>
        <a href="/sociable-software-delivery-an-introduction-to-bdd/">Sociable Software Delivery - An Introduction to BDD</a>
      </li>
    
      <li>
        <a href="/best-gtd-app/">The Best GTD App</a>
      </li>
    
      <li>
        <a href="/gtd-app-review-conqu/">GTD App Review - Conqu</a>
      </li>
    
    <li><a href="/archive">More...</a></li>
  </ul>
</section>

    </div>

  </div>

</div>


</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tomphilip';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='//www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-XXXXX-X');ga('send','pageview');
</script>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery.min.js"><\/script>')</script>

<script type="text/javascript" src="/javascripts/vendor/bootstrap.transition.js"></script>
<script type="text/javascript" src="/javascripts/vendor/bootstrap.collapse.js"></script>
<script type="text/javascript" src="/javascripts/vendor/skrollr.min.js"></script>
<script type="text/javascript" src="/javascripts/vendor/jquery.simple-text-rotator.min.js"></script>
<script type="text/javascript" src="/javascripts/vendor/swipe.js"></script>
<script type="text/javascript" src="/javascripts/vendor/jquery.swipebox.min.js"></script>
<script type="text/javascript" src="/javascripts/slider.js"></script>
<!--[if lt IE 8]><script src="/javascripts/vendor/pictonic.min.js"></script><![endif]-->

<!--[if lt IE 9]>
<script type="text/javascript" src="/javascripts/vendor/skrollr.ie.min.js"></script>
<![endif]-->
<script type="text/javascript">
  nav = $('.page-post .navbar').removeAttr('data-500-start data-540-start');
  $('.page-post .site-header__footer').removeAttr('data-400-start data-500-start');
  
  $('.navbar-collapse').on('show.bs.collapse', function() {
    $('#navToggler').addClass('opened');
  });
  
  $('.navbar-collapse').on('hide.bs.collapse', function() {
    $('#navToggler').removeClass('opened');
  });

  if($('#slider').length > 0){
    slider.slidify('#slider', '#slider_nav');    
  }
  
  $(function() {
  	$('.swipebox').swipebox();
  });
  
</script>

<script type="text/javascript">

  function isTouchy(){
    //  Hacky
    return (/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i).test(navigator.userAgent || navigator.vendor || window.opera) || Modernizr.touch;    
  }

  if (!isTouchy()){
    var s = skrollr.init({forceHeight: false});    
  }
</script>

<script type="text/javascript">
	$(".rotate").textrotator({
	  animation: "flip",
		separator: ",", 
	  speed: 2000
	});
</script>




</body>
</html>
